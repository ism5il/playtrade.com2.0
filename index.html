<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PlayTrade</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body data-theme="light">

  <!-- HEADER -->
  <header>
    <div class="brand">PlayTrade</div>

    <nav>
      <a href="#home">Home</a>
      <a href="#catalog">Catalog</a>
      <a href="#safety">Safety</a>
      <a href="#contact">Contact</a>
    </nav>

    <div class="controls">

      <!-- Username display -->
      <div id="userDisplay" class="user-display" onclick="openAuthModal()" 
           style="cursor:pointer; display:none;"></div>

      <!-- Logout -->
      <button id="logoutBtn" class="logout-btn" onclick="logout()" style="display:none;">
        Log Out
      </button>

      <!-- Login -->
      <button id="loginBtn" onclick="openAuthModal()">Login</button>

      <!-- Theme -->
      <button class="theme-toggle" onclick="toggleTheme()">Theme</button>

      <!-- Cart -->
      <button class="cart-btn" onclick="openCart()">
        <span class="cart-icon">ðŸ›’</span>
        <span id="cartCount" class="cart-count">0</span>
      </button>
    </div>
  </header>

  <!-- MAIN -->
  <main id="home">
    <section class="hero">
      <div class="hero-content">
        <h1>Digital Goods Marketplace</h1>
        <p>Fast, safe and smart â€” buy game keys, currency and skins with escrow protection and AI support.</p>
        <a href="#catalog" class="cta">Browse Catalog</a>
      </div>
      <div class="hero-visual"></div>
    </section>

    <div class="search-row">
      <input id="searchInput" oninput="filterCards()" placeholder="Search products, e.g. GTA, CS2..." />
      <select id="filterSelect" onchange="filterCards()">
        <option value="all">All</option>
        <option value="keys">Game Keys</option>
        <option value="skins">Skins</option>
        <option value="currency">Currency</option>
        <option value="subscriptions">Subscriptions</option>
      </select>
    </div>

    <!-- PRODUCT CATALOG -->
    <section id="catalog" class="catalog">

      <div class="card" onclick="openProduct(this)"
           data-id="p1"
           data-category="currency"
           data-title="GTA V â€” Online Money"
           data-img="https://cdn.cloudflare.steamstatic.com/steam/apps/271590/header.jpg"
           data-desc="Instant delivery. Verified seller. Safe escrow."
           data-price="4.99">
        <div class="card-media"><img src="https://cdn.cloudflare.steamstatic.com/steam/apps/271590/header.jpg"></div>
        <div class="card-body">
          <h3>GTA V â€” Online Money</h3>
          <p>Fast delivery â€¢ Verified seller</p>
          <div class="card-footer">
            <div class="price">â‚¬4.99</div>
            <button class="small" onclick="event.stopPropagation(); addToCartFromBtn('p1')">Add</button>
          </div>
        </div>
      </div>

      <div class="card" onclick="openProduct(this)"
           data-id="p2"
           data-category="skins"
           data-title="CS2 Skins Pack"
           data-img="https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg"
           data-desc="Premium curated skins collection."
           data-price="7.50">
        <div class="card-media"><img src="https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg"></div>
        <div class="card-body">
          <h3>CS2 Skins Pack</h3>
          <p>Premium selected skins</p>
          <div class="card-footer">
            <div class="price">â‚¬7.50</div>
            <button class="small" onclick="event.stopPropagation(); addToCartFromBtn('p2')">Add</button>
          </div>
        </div>
      </div>

      <div class="card" onclick="openProduct(this)"
           data-id="p3"
           data-category="keys"
           data-title="Minecraft Java Key"
           data-img="https://cdn.cloudflare.steamstatic.com/steam/apps/1672970/header.jpg"
           data-desc="Global region-free activation key."
           data-price="19.99">
        <div class="card-media"><img src="https://cdn.cloudflare.steamstatic.com/steam/apps/1672970/header.jpg"></div>
        <div class="card-body">
          <h3>Minecraft Java Key</h3>
          <p>Official activation code</p>
          <div class="card-footer">
            <div class="price">â‚¬19.99</div>
            <button class="small" onclick="event.stopPropagation(); addToCartFromBtn('p3')">Add</button>
          </div>
        </div>
      </div>

      <div class="card" onclick="openProduct(this)"
           data-id="p4"
           data-category="subscriptions"
           data-title="Xbox Game Pass â€” 1 Month"
           data-img="https://cdn.cloudflare.steamstatic.com/steam/apps/2081950/header.jpg"
           data-desc="One month subscription, instant code."
           data-price="8.99">
        <div class="card-media"><img src="https://cdn.cloudflare.steamstatic.com/steam/apps/2081950/header.jpg"></div>
        <div class="card-body">
          <h3>Xbox Game Pass â€” 1 Month</h3>
          <p>Digital subscription</p>
          <div class="card-footer">
            <div class="price">â‚¬8.99</div>
            <button class="small" onclick="event.stopPropagation(); addToCartFromBtn('p4')">Add</button>
          </div>
        </div>
      </div>

    </section>

    <section id="safety" class="safety">
      <h2>How PlayTrade Keeps You Safe</h2>
      <p>Every purchase is secured with escrow. Funds are frozen on payment and released only after you confirm delivery.</p>
    </section>

    <section id="contact" class="contact">
      <h2>Contact</h2>
      <p>Email: <strong>ismxil@mail.lv</strong></p>
    </section>
  </main>

  <footer>PlayTrade Â© 2025</footer>

  <!-- PRODUCT MODAL -->
  <div id="productModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" onclick="closeModal()">Ã—</button>
      <div class="modal-grid">
        <img id="modalImg">
        <div>
          <h2 id="modalTitle"></h2>
          <p id="modalDesc"></p>
          <div id="modalPrice" class="modal-price"></div>
          <div class="modal-actions">
            <button onclick="addToCartModal()">Add to Cart</button>
            <button class="outline" onclick="buyNow()">Buy Now</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CART MODAL -->
  <div id="cartModal" class="modal cart-modal">
    <div class="modal-card">
      <button class="modal-close" onclick="closeCart()">Ã—</button>
      <h2>Your Cart</h2>
      <div id="cartList" class="cart-list"></div>
      <div class="cart-summary">
        <div>Total: <strong id="cartTotal">â‚¬0.00</strong></div>
        <div class="cart-actions">
          <button onclick="continueToCheckout()">Checkout</button>
          <button class="outline" onclick="clearCart()">Clear</button>
        </div>
      </div>
    </div>
  </div>

  <!-- CHECKOUT -->
  <div id="checkoutModal" class="modal checkout-modal">
    <div class="modal-card">
      <button class="modal-close" onclick="closeCheckout()">Ã—</button>
      <h2>Checkout</h2>
      <div id="checkoutItems" class="checkout-items"></div>
      <div class="checkout-total">Amount to pay: <strong id="checkoutTotal">â‚¬0.00</strong></div>
      <button onclick="simulatePayment()">Pay & Freeze Funds (Escrow)</button>
      <div id="paymentNotice" class="payment-notice"></div>
    </div>
  </div>

  <!-- LOGIN / REGISTER -->
  <div id="authModal" class="modal auth-modal">
    <div class="modal-card" style="max-width:420px;">
      <button class="modal-close" onclick="closeAuthModal()">Ã—</button>
      <h2 id="authTitle">Login</h2>

      <div class="auth-fields"></div>

      <div class="auth-actions">
        <button onclick="submitAuth()">Continue</button>
        <button class="outline" onclick="switchAuthMode()">Switch to Register</button>
      </div>

      <div id="authMsg" class="auth-msg"></div>
    </div>
  </div>

  <!-- AI ASSISTANT BUTTON -->
  <div class="ai-button" onclick="toggleAIChat()">AI</div>

  <!-- AI ASSISTANT PANEL -->
  <div id="aiChat" class="ai-chat">
    <div class="ai-header">PlayTrade Assistant</div>
    <div id="aiMessages" class="ai-messages"></div>
    <div class="ai-input">
      <input id="aiText" onkeydown="if(event.key==='Enter') sendAIMessage()" 
             placeholder="Ask about products, safety or orders..." />
      <button onclick="sendAIMessage()">Send</button>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
