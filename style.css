:root{
  --bg:#ffffff;
  --text:#111;
  --card:#f6f7fb;
  --accent:#4a90e2;
  --glass:rgba(255,255,255,0.6);
}
[data-theme="dark"]{
  --bg:#0f1113;
  --text:#e9eef6;
  --card:#151719;
  --accent:#00bfff;
  --glass:rgba(20,20,20,0.5);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Segoe UI,system-ui,Arial;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;background:var(--card);box-shadow:0 6px 20px rgba(0,0,0,0.06);position:sticky;top:0;z-index:50}
.brand{font-weight:700;font-size:1.25rem;color:var(--accent)}
nav a{margin:0 12px;color:var(--text);text-decoration:none;font-weight:600}
.controls{display:flex;align-items:center;gap:10px}
.theme-toggle{padding:0.5rem 0.8rem;border-radius:8px;border:1px solid var(--accent);background:transparent;color:var(--accent);cursor:pointer}
.cart-btn{position:relative;background:transparent;border:0;cursor:pointer;font-size:1.05rem}
.cart-count{position:absolute;top:-6px;right:-8px;background:red;color:#fff;border-radius:50%;padding:2px 6px;font-size:0.75rem}

.auth button{
  padding:6px 10px;
  border-radius:8px;
  background:transparent;
  border:1px solid var(--accent);
  color:var(--accent);
  cursor:pointer;
}

/* HERO */
.hero{display:flex;align-items:center;justify-content:space-between;padding:3rem 2rem;gap:20px}
.hero-content{max-width:640px}
.hero h1{font-size:2.2rem;margin:0 0 0.6rem}
.hero p{margin:0 0 1rem;color:var(--text);opacity:0.85}
.cta{display:inline-block;padding:0.8rem 1.4rem;background:var(--accent);color:#fff;border-radius:10px;text-decoration:none;font-weight:700}
.hero-visual{width:260px;height:140px;border-radius:16px;background:linear-gradient(135deg,var(--accent),transparent);box-shadow:0 12px 30px rgba(0,0,0,0.08)}

/* SEARCH */
.search-row{display:flex;gap:10px;justify-content:center;padding:1rem 2rem}
.search-row input{width:60%;padding:0.7rem 1rem;border-radius:10px;border:1px solid #d6dbe6}
.search-row select{padding:0.7rem 1rem;border-radius:10px;border:1px solid #d6dbe6}

/* CATALOG */
.catalog{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem;padding:1.5rem 2rem}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.6),var(--card));border-radius:14px;padding:12px;box-shadow:0 10px 30px rgba(0,0,0,0.06);transition:transform 0.25s,box-shadow 0.25s;transform-style:preserve-3d}
.card:hover{transform:translateY(-10px) rotateX(2deg) rotateY(2deg);box-shadow:0 18px 40px rgba(0,0,0,0.12)}
.card-media{display:flex;justify-content:center;padding:8px}
.card-media img{width:100%;max-width:220px;border-radius:10px;display:block}
.card-body{padding:8px;text-align:left}
.card-body h3{margin:0 0 6px;font-size:1.05rem}
.card-body p{margin:0;color:var(--text);opacity:0.8;font-size:0.9rem}
.card-footer{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.price{color:var(--accent);font-weight:800}
.small{background:var(--accent);color:#fff;border:0;padding:6px 10px;border-radius:8px;cursor:pointer}

/* SAFETY BLOCK */
.safety{padding:2rem;background:var(--card);margin:1.2rem;border-radius:12px}

/* CONTACT */
.contact{padding:1.2rem 2rem;text-align:center}
footer{text-align:center;padding:1rem;background:var(--card);margin-top:1.2rem}

/* MODALS */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:80}
.modal-card{background:var(--card);padding:18px;border-radius:14px;width:92%;max-width:820px;box-shadow:0 20px 60px rgba(0,0,0,0.25)}
.modal-close{float:right;background:transparent;border:0;font-size:24px;color:var(--accent);cursor:pointer}

/* PRODUCT MODAL */
.modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:center}
.modal-grid img{width:100%;border-radius:12px}
.modal-price{font-size:1.3rem;color:var(--accent);font-weight:800;margin-top:6px}
.modal-actions{display:flex;gap:10px;margin-top:12px}
.modal-actions button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer}
.modal-actions .outline{background:transparent;border:1px solid var(--accent);color:var(--accent)}

/* CART */
.cart-modal .modal-card{max-width:520px}
.cart-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:8px;background:var(--bg);margin-bottom:8px}
.cart-item img{width:64px;height:40px;object-fit:cover;border-radius:6px}

/* CHECKOUT */
.checkout-modal .modal-card{max-width:620px}
.checkout-items{max-height:240px;overflow:auto;margin:10px 0}

/* AI CHAT */
.ai-button{position:fixed;right:22px;bottom:22px;width:56px;height:56px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;cursor:pointer;z-index:90}

/* AUTH MODAL (REGISTRATION / LOGIN) */
.auth-modal .modal-card{
  max-width:420px;
  text-align:center;
}

.auth-fields{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:10px 0;
}

.auth-fields input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  background:var(--bg);
  color:var(--text);
}

.auth-actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}

.auth-msg{
  margin-top:10px;
  color:var(--accent);
  font-weight:700;
}

/* RESPONSIVE */
@media (max-width:880px){
  .modal-grid{grid-template-columns:1fr}
  .hero{flex-direction:column;align-items:flex-start}
  .search-row input{width:100%}
}
.logout-btn{
  padding:0.5rem 0.8rem;
  border-radius:8px;
  border:1px solid red;
  background:transparent;
  color:red;
  cursor:pointer;
  font-weight:600;
}
.logout-btn:hover{
  background:red;
  color:#fff;
}
.user-display{
  font-weight:700;
  padding:0.3rem 0.6rem;
  background:var(--card);
  border-radius:6px;
}
.ai-chat {
  display: none;
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 280px;
  height: 360px;
  background: var(--card);
  border-radius: 10px;
  padding: 10px;
  flex-direction: column;
  z-index: 99999;
}

.ai-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--accent);
  color: #fff;
  border-radius: 50%;
  width: 55px;
  height: 55px;
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 99999;
}
/* --- AI Chat Button --- */
.ai-button {
  position: fixed;
  right: 22px;
  bottom: 22px;
  width: 62px;
  height: 62px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
  cursor: pointer;
  transition: transform .25s, box-shadow .25s;
  z-index: 9999;
}

.ai-button:hover {
  transform: scale(1.07);
  box-shadow: 0 15px 40px rgba(0,0,0,0.35);
}

/* --- AI Chat Window --- */
.ai-chat {
  position: fixed;
  right: 22px;
  bottom: 100px;
  width: 330px;
  height: 450px;
  background: var(--card);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  display: none;
  flex-direction: column;
  overflow: hidden;
  animation: fadeIn .25s ease;
  z-index: 9999;
}

@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform: translateY(0);}
}

/* Header */
.ai-header {
  background: var(--accent);
  color: #fff;
  padding: 14px;
  font-size: 1.05rem;
  font-weight: 700;
  text-align: center;
  letter-spacing: .3px;
}

/* Messages area */
.ai-messages {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
  background: var(--bg);
}

/* Bubbles */
.ai-msg {
  max-width: 80%;
  padding: 9px 12px;
  background: var(--card);
  margin-bottom: 8px;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  font-size: .92rem;
  line-height: 1.35rem;
  color: var(--text);
  animation: msgPop .2s ease;
}

@keyframes msgPop {
  from {transform: scale(.95); opacity: .3;}
  to {transform: scale(1); opacity: 1;}
}

/* User bubble */
.ai-msg.user {
  background: var(--accent);
  color: #fff;
  margin-left: auto;
}

/* Input area */
.ai-input {
  display: flex;
  gap: 8px;
  padding: 10px;
  background: var(--card);
  border-top: 1px solid rgba(0,0,0,0.1);
}

.ai-input input {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: var(--bg);
}

.ai-input button {
  background: var(--accent);
  border: 0;
  color: #fff;
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
  transition: .2s;
}

.ai-input button:hover {
  opacity: .85;
}
